!function(){function t(t){return function(t){if(Array.isArray(t))return i(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||n(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function e(t,e){var i;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(i=n(t))||e&&t&&"number"==typeof t.length){i&&(t=i);var a=0,r=function(){};return{s:r,n:function(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,c=!1;return{s:function(){i=t[Symbol.iterator]()},n:function(){var t=i.next();return s=t.done,t},e:function(t){c=!0,o=t},f:function(){try{s||null==i.return||i.return()}finally{if(c)throw o}}}}function n(t,e){if(t){if("string"==typeof t)return i(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(t,e):void 0}}function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function o(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{"1AaR":function(t,e,n){"use strict";n.d(e,"a",function(){return c});var i=n("tk/3"),r=n("AytR"),s=n("fXoL");new i.e({"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("token")});var c=function(){var t=function(){function t(e){a(this,t),this.http=e,this.baseUrl=r.a.apiUrlEC}return o(t,[{key:"hasLock",value:function(t,e,n){return this.http.get("".concat(this.baseUrl,"Abnormal/HasLock/").concat(t,"/").concat(e,"/").concat(n))}},{key:"getBatchByIngredientID",value:function(t){return this.http.get("".concat(this.baseUrl,"Abnormal/GetBatchByIngredientID/").concat(t))}},{key:"getAll",value:function(){return this.http.get(this.baseUrl+"Abnormal/GetAll",{})}},{key:"create",value:function(t){return this.http.post(this.baseUrl+"Abnormal/Create",t)}},{key:"createRange",value:function(t){return this.http.post(this.baseUrl+"Abnormal/CreateRange",t)}},{key:"update",value:function(t){return this.http.put(this.baseUrl+"Abnormal/Update",t)}},{key:"delete",value:function(t){return this.http.delete(this.baseUrl+"Abnormal/Delete/"+t)}},{key:"getBuildingByIngredientAndBatch",value:function(t,e){return this.http.get("".concat(this.baseUrl,"Abnormal/GetBuildingByIngredientAndBatch/").concat(t,"/").concat(e))}}]),t}();return t.\u0275fac=function(e){return new(e||t)(s.Zb(i.b))},t.\u0275prov=s.Ib({token:t,factory:t.\u0275fac,providedIn:"root"}),t}()},KLU1:function(t,e,n){"use strict";n.d(e,"a",function(){return c});var i=n("AytR"),r=n("fXoL"),s=n("tk/3"),c=function(){var t=function(){function t(e){a(this,t),this.http=e,this.baseUrl=i.a.apiUrlEC}return o(t,[{key:"getAllSetting",value:function(){return this.http.get(this.baseUrl+"Setting/GetAllSetting",{})}},{key:"getAllGlueType",value:function(){return this.http.get(this.baseUrl+"Setting/GetAllGlueType",{})}},{key:"getSettingByBuilding",value:function(t){return this.http.get(this.baseUrl+"Setting/GetSettingByBuilding/"+t,{})}},{key:"getMachineByBuilding",value:function(t){return this.http.get(this.baseUrl+"Setting/GetMachineByBuilding/"+t,{})}},{key:"deleteSetting",value:function(t){return this.http.delete(this.baseUrl+"Setting/DeleteSetting/"+t,{})}},{key:"deleteMachine",value:function(t){return this.http.delete(this.baseUrl+"Setting/DeleteMachine/"+t,{})}},{key:"AddStir",value:function(t){return this.http.post(this.baseUrl+"Setting/Create",t)}},{key:"addSetting",value:function(t){return this.http.post(this.baseUrl+"Setting/CreateSetting",t)}},{key:"addMachine",value:function(t){return this.http.post(this.baseUrl+"Setting/CreateMachine",t)}},{key:"updateStir",value:function(t){return this.http.put(this.baseUrl+"Setting/Update",t)}},{key:"updateSetting",value:function(t){return this.http.put(this.baseUrl+"Setting/UpdateSetting",t)}},{key:"updateMachine",value:function(t){return this.http.put(this.baseUrl+"Setting/UpdateMachine",t)}}]),t}();return t.\u0275fac=function(e){return new(e||t)(r.Zb(s.b))},t.\u0275prov=r.Ib({token:t,factory:t.\u0275fac,providedIn:"root"}),t}()},NkNT:function(t,e,n){"use strict";n.d(e,"a",function(){return c});var i=n("fXoL"),r=n("tyNb"),s=n("x+4Q"),c=function(){var t=function(){function t(e,n,i){a(this,t),this.el=e,this.route=n,this.authService=i}return o(t,[{key:"ngOnInit",value:function(){var t=this;if(this.authService.loggedIn()){var e=JSON.parse(localStorage.getItem("functions")).map(function(t){return t.childrens}),n=this.route.snapshot.data.functionCode,i=[].concat.apply([],e).filter(function(t){return t.functionCode===n});this.el.nativeElement.style.display=i&&i.filter(function(e){return e.functionCode===t.appFunction&&e.code===t.appAction}).length>0?"":"none"}else this.el.nativeElement.style.display="none"}}]),t}();return t.\u0275fac=function(e){return new(e||t)(i.Mb(i.l),i.Mb(r.a),i.Mb(s.a))},t.\u0275dir=i.Hb({type:t,selectors:[["","appPermission",""]],inputs:{appFunction:"appFunction",appAction:"appAction"}}),t}()},YW37:function(t,n,i){"use strict";i.d(n,"a",function(){return A});var r,s=i("mrSG"),c=i("XNiG"),u=i("Kj3r"),l=i("fXoL"),h=i("1kSV"),d=i("pwR+"),p=i("1AaR"),g=i("HJFG"),f=i("ofXK"),b=i("XMGJ"),y=i("3Pt+"),m=((r=function(){function t(e){a(this,t),this.host=e,this.subject=new c.a,this.subscription=[]}return o(t,[{key:"onFocus",value:function(){var t=this;setTimeout(function(){t.host.nativeElement.select()},300)}},{key:"onFocusout",value:function(t){var e=this;setTimeout(function(){e.host.nativeElement.focus(),e.host.nativeElement.select()},3e4)}},{key:"onChange",value:function(t){this.subject.next(t)}},{key:"ngAfterViewInit",value:function(){var t=this;setTimeout(function(){t.host.nativeElement.focus()},300)}},{key:"ngOnInit",value:function(){var t=this;this.subscription.push(this.subject.pipe(Object(u.a)(1e3)).subscribe(function(e){return Object(s.a)(t,void 0,void 0,regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:this.host.nativeElement.focus(),this.host.nativeElement.select();case 1:case"end":return t.stop()}},t,this)}))}))}},{key:"ngOnDestroy",value:function(){this.subscription.forEach(function(t){return t.unsubscribe()})}},{key:"onKeydownHandler",value:function(t){console.log("document:keydown.enter"),t.preventDefault(),this.host.nativeElement.value=this.host.nativeElement.value+"    "}},{key:"onKeydownTabHandler",value:function(t){console.log("document:keydown.tab"),t.preventDefault(),this.host.nativeElement.value=this.host.nativeElement.value+"    "}}]),t}()).\u0275fac=function(t){return new(t||r)(l.Mb(l.l))},r.\u0275dir=l.Hb({type:r,selectors:[["","autoselectsubpackage",""]],hostBindings:function(t,e){1&t&&l.cc("focus",function(){return e.onFocus()})("focusout",function(t){return e.onFocusout(t)})("ngModelChange",function(t){return e.onChange(t)})("keydown.enter",function(t){return e.onKeydownHandler(t)},!1,l.zc)("keydown.tab",function(t){return e.onKeydownTabHandler(t)},!1,l.zc)}}),r),v=i("GJ+o"),k=i("0jTc"),I=i("QUNt"),S=i("uF4Q"),U=i("sYmb");function w(t,e){1&t&&(l.Kc(0),l.hc(1,"translate")),2&t&&l.Mc(" ",l.ic(1,1,"Daughter cans")," ")}function B(t,e){1&t&&l.Kc(0),2&t&&l.Mc(" ",e.$implicit.name," ")}function D(t,e){1&t&&(l.Kc(0),l.hc(1,"translate")),2&t&&l.Mc(" ",l.ic(1,1,"Glue Name")," ")}function x(t,e){if(1&t&&(l.Sb(0,"div"),l.Nb(1,"ejs-qrcodegenerator",26),l.Rb()),2&t){var n=e.$implicit,i=l.gc();l.zb(1),l.nc("value",n.code),l.mc("id",n.code)("displayText",i.displayTextMethod)}}var C,A=((C=function(){function t(e,n,i,r,o,s){a(this,t),this.activeModal=e,this.bottomFactoryService=n,this.abnormalService=i,this.alertify=r,this.datePipe=o,this.todolistService=s,this.subpackages=[],this.subscription=[],this.subject=new c.a,this.can="",this.displayTextMethod={visibility:!1}}return o(t,[{key:"ngOnDestroy",value:function(){this.subscription.forEach(function(t){return t.unsubscribe()})}},{key:"ngOnInit",value:function(){console.log("oninit",this.data),this.focusNumberOfScan=!1,this.status=null,this.statusText="",this.checkQRCodeV110()}},{key:"onkeypress",value:function(t){null!==this.can.match(/^-?(0|[1-9]\d*)?$/)?(this.generateSubpackageParams={amountOfChemical:this.chemical.unit,buildingID:this.data.buildingID,mixingInfoID:this.mixingInfoID,can:+this.can,glueName:this.data.glueName,glueNameID:this.data.glueNameID},console.log("onkeypress",this.generateSubpackageParams),this.generateScanByNumber()):this.alertify.warning("Ch\u1ec9 \u0111\u01b0\u1ee3c nh\u1eadp s\u1ed1! <br> Only key in number!",!0)}},{key:"onkeypressV110",value:function(t){if(null!==this.can.match(/^-?(0|[1-9]\d*)?$/)){this.subpackages=[];for(var e=null==this.subpackageLatestItem?0:this.subpackageLatestItem.position,n=0;n<=+this.can-1;n++){e+=1;var i={code:"".concat(this.mixingInfoCode,"_").concat(this.batch,"_").concat(e),glueName:this.data.glueName,name:"".concat(this.data.glueName,"_").concat(e),glueNameID:this.data.glueNameID,position:e,mixingInfoID:0,expiredTime:new Date((new Date).setHours(this.chemical.expiredTime)),createdBy:JSON.parse(localStorage.getItem("user")).user.id,createdTime:new Date,amount:this.subpackageCapacity.capacity};this.subpackages.push(i)}}else this.alertify.warning("Ch\u1ec9 \u0111\u01b0\u1ee3c nh\u1eadp s\u1ed1! <br> Only key in number!",!0)}},{key:"checkStatus",value:function(){return null===this.status?(this.statusText="",""):!0===this.status?(this.statusText="OK","success-scan"):!1===this.status?(this.statusText="NO","warning-scan"):void 0}},{key:"checkQRCode",value:function(){var t=this;this.subscription.push(this.subject.pipe(Object(u.a)(500)).subscribe(function(e){return Object(s.a)(t,void 0,void 0,regeneratorRuntime.mark(function t(){var n,i,a;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.validateQRCode(e);case 2:!1!==(a=t.sent).status&&(this.chemical=a.ingredient,this.subpackages=a.subpackages,this.mixingInfoID=a.mixingInfoID,(null===(n=this.subpackages)||void 0===n?void 0:n.length)>=0&&(this.can=null===(i=this.subpackages)||void 0===i?void 0:i.length));case 4:case"end":return t.stop()}},t,this)}))}))}},{key:"checkQRCodeV110",value:function(){var t=this;this.subscription.push(this.subject.pipe(Object(u.a)(500)).subscribe(function(e){return Object(s.a)(t,void 0,void 0,regeneratorRuntime.mark(function t(){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.validateQRCode(e);case 2:!1!==(n=t.sent).status&&(this.chemical=n.ingredient,this.mixingInfoCode=n.code,this.batch=n.batch,this.focusNumberOfScan=!0,this.getInfo());case 4:case"end":return t.stop()}},t,this)}))}))}},{key:"validateQRCode",value:function(t){return Object(s.a)(this,void 0,void 0,regeneratorRuntime.mark(function e(){var n,i,a,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.QRCode.split("    ")||[],i=n[2].split(":")[1].trim()+":"+n[0].split(":")[1].trim(),this.partNO=i,this.scanParams={partNO:i,glueID:this.data.glueID,glueName:this.data.glueName,batchNO:n[4].split(":")[1].trim()+":"+n[0].split(":")[1].trim(),glueNameID:this.data.glueNameID,mixingInfoID:this.data.mixingInfoID,buildingID:this.data.buildingID,estimatedStartTime:this.data.estimatedStartTime,estimatedFinishTime:this.data.estimatedFinishTime},e.next=4,this.scanQRCode();case 4:return a=e.sent,this.status=a.status,this.mixingInfoCode=a.code,this.batch=a.batch,this.mixingInfoID=a.data.mixingInfoID,console.log("scannQRcode",a),e.next=8,this.hasLock(a.name,n[4].split(":")[1].trim()+":"+n[0].split(":")[1].trim());case 8:return r=e.sent,e.abrupt("return",null===a?(this.alertify.warning("The QR Code is invalid!<br> M\xe3 QR kh\xf4ng h\u1ee3p l\u1ec7! Vui l\xf2ng th\u1eed l\u1ea1i m\xe3 kh\xe1c.",!0),this.qrCode="",{status:!1}):!0===r?(this.alertify.error("This chemical has been locked! <br> H\xf3a ch\u1ea5t n\xe0y \u0111\xe3 b\u1ecb kh\xf3a!",!0),this.qrCode="",{status:!1}):{status:!0,ingredient:a.data.ingredient,code:a.data.code,batch:a.data.batch,subpackages:a.data.subpackages,mixingInfoID:a.data.mixingInfoID});case 10:case"end":return e.stop()}},e,this)}))}},{key:"getInfo",value:function(){var t=this;this.bottomFactoryService.getSubpackageCapacity().subscribe(function(e){t.subpackageCapacity=e}),this.bottomFactoryService.getSubpackageLatestSequence(this.batch,this.data.glueNameID,this.data.buildingID).subscribe(function(e){t.subpackageLatestItem=e})}},{key:"hasLock",value:function(t,e){var n=this,i=this.data.buildingName;return new Promise(function(a,r){n.abnormalService.hasLock(t,i,e).subscribe(function(t){a(t)},function(t){r(!1)})})}},{key:"scanQRCode",value:function(){return Object(s.a)(this,void 0,void 0,regeneratorRuntime.mark(function t(){var e=this;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(t,n){e.bottomFactoryService.scanQRCode(e.scanParams).subscribe(function(e){t(e)},function(t){n(t)})}));case 1:case"end":return t.stop()}},t)}))}},{key:"generateScanByNumber",value:function(){var t=this;return new Promise(function(e,n){t.bottomFactoryService.generateScanByNumber(t.generateSubpackageParams).subscribe(function(e){t.subpackages=e.data,t.focusNumberOfScan=!1},function(e){t.alertify.error(e)})})}},{key:"onNgModelChangeScanQRCode",value:function(t){return Object(s.a)(this,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.subject.next({QRCode:t,ingredient:null});case 1:case"end":return e.stop()}},e,this)}))}},{key:"printData",value:function(){return Object(s.a)(this,void 0,void 0,regeneratorRuntime.mark(function t(){var n,i,a,r,o,s,c=this;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(void 0!==this.subpackages&&0!==this.subpackages.length&&null!==this.subpackages){t.next=2;break}return t.abrupt("return",void this.alertify.warning("Vui l\xf2ng qu\xe9t m\xe3 QR v\xe0 nh\u1eadp s\u1ed1 l\u01b0\u1ee3ng can c\u1ea7n chia!",!0));case 2:n="",i=e(this.subpackages);try{for(i.s();!(a=i.n()).done;)r=a.value,o=document.getElementById(r.code),s="0001-01-01T00:00:00"===r.expiredTime?"N/A":this.datePipe.transform(new Date(r.expiredTime),"YYYYMMdd HH:mm"),n+="\n       <div class='content'>\n        <div class='qrcode'>\n         ".concat(o.innerHTML,"\n         </div>\n          <div class='info'>\n          <ul>\n          <li class='subInfo'>Name: ").concat(r.name,"</li>\n          <li class='subInfo'>Code: ").concat(r.code,"</li>\n          <li class='subInfoNho' >MFG: ").concat(this.datePipe.transform(new Date(r.createdTime),"YYYYMMdd HH:mm"),"</li>\n          <li class='subInfoNho' >EXP: ").concat(s,"</li>\n          </ul>\n         </div>\n      </div>\n      ")}catch(u){i.e(u)}finally{i.f()}this.configurePrint(n),this.bottomFactoryService.saveSubpackage({subpackages:this.subpackages,ingredient:this.chemical,partNO:this.partNO,glueID:this.data.glueID,glueName:this.data.glueName,batchNO:"DEFAULT",glueNameID:this.data.glueNameID,mixingInfoID:this.data.mixingInfoID,mixingInfoCode:this.mixingInfoCode,buildingID:this.data.buildingID,estimatedStartTime:this.data.estimatedStartTime,estimatedFinishTime:this.data.estimatedFinishTime}).subscribe(function(){c.todolistService.setValue(!0),c.activeModal.close()});case 6:case"end":return t.stop()}},t,this)}))}},{key:"configurePrint",value:function(t){var e=window.open("","_blank","left=0,top=0,width=1000,height=900,toolbar=0,scrollbars=0,status=0");e.document.write('\n    <html>\n      <head>\n      </head>\n      <style>\n        * {\n          box-sizing: border-box;\n          -moz-box-sizing: border-box;\n        }\n\n        .content {\n          page-break-after: always;\n          clear: both;\n        }\n\n        .content .qrcode {\n          float:left;\n          width: 100px;\n          margin-top: 10px;\n          padding: 0;\n          margin-left: 0px;\n        }\n\n        .content .info {\n          float:left;\n          list-style: none;\n          width: 200px;\n        }\n        .content .info ul {\n          float:left;\n          list-style: none;\n          padding: 0px;\n          margin: 0px;\n          margin-top: 20px;\n          font-weight: bold;\n          word-wrap: break-word;\n        }\n\n        @page {\n          size: 2.65 1.20 in;\n          page-break-after: always;\n          margin: 0;\n        }\n        @media print {\n          html, body {\n            width: 90mm; // Chi co nhan millimeter\n          }\n        }\n      </style>\n      <body onload="window.print(); window.close()">\n        '.concat(t,"\n      </body>\n    </html>\n    ")),e.document.close()}}]),t}()).\u0275fac=function(t){return new(t||C)(l.Mb(h.a),l.Mb(d.a),l.Mb(p.a),l.Mb(g.a),l.Mb(f.d),l.Mb(b.a))},C.\u0275cmp=l.Gb({type:C,selectors:[["app-subpackage"]],inputs:{data:"data"},decls:45,vars:31,consts:[[1,"modal-header"],[1,"modal-title"],[1,"modal-body","p-0"],[1,"row","pt-2"],[1,"col-md-12"],[1,"card"],[1,"card-body","d-flex","justify-content-start","align-items-center"],[1,"modal-title",2,"width","18%"],["type","text","id","status",1,"form-control","ml-2",2,"width","15%","cursor","not-allowed","pointer-events","none",3,"ngModel","placeholder","ngModelChange"],["type","text","autoselectsubpackage","","id","scanner",1,"form-control","mx-2",2,"width","52%",3,"ngModel","placeholder","ngModelChange"],["type","text","id","keyin",1,"form-control","mr-2",2,"width","20%",3,"ngModel","placeholder","keyup.enter","ngModelChange"],[1,"card-body","table-responsive","p-0"],[3,"dataSource"],["grid",""],["field","name","headerText","Daughter cans","width","92","textAlign","Center"],["headerTemplate",""],["template",""],["field","glueName","headerText","Glue Name","width","344","textAlign","Center"],["field","amount","width","138","textAlign","Center",3,"headerText"],[1,"modal-footer","justify-content-center","d-flex"],["type","button",1,"btn","btn-warning",3,"click"],[1,"fa","fa-save"],["type","button",1,"btn","btn-primary",3,"click"],[1,"fa","fa-check"],[2,"position","absolute","top","5000px"],[4,"ngFor","ngForOf"],["width","100px","height","130px","mode","SVG",2,"display","block",3,"id","displayText","value"]],template:function(t,e){1&t&&(l.Sb(0,"div",0),l.Sb(1,"h4",1),l.Kc(2),l.hc(3,"translate"),l.Rb(),l.Rb(),l.Sb(4,"div",2),l.Sb(5,"div",3),l.Sb(6,"div",4),l.Sb(7,"div",5),l.Sb(8,"div",6),l.Sb(9,"h4",7),l.Kc(10),l.hc(11,"translate"),l.Rb(),l.Sb(12,"input",8),l.cc("ngModelChange",function(t){return e.statusText=t}),l.hc(13,"translate"),l.Rb(),l.Sb(14,"input",9),l.cc("ngModelChange",function(t){return e.onNgModelChangeScanQRCode(t)})("ngModelChange",function(t){return e.qrCode=t}),l.hc(15,"translate"),l.Rb(),l.Sb(16,"input",10),l.cc("keyup.enter",function(t){return e.onkeypressV110(t)})("ngModelChange",function(t){return e.can=t}),l.hc(17,"translate"),l.Rb(),l.Rb(),l.Rb(),l.Rb(),l.Sb(18,"div",4),l.Sb(19,"div",5),l.Sb(20,"div",11),l.Sb(21,"ejs-grid",12,13),l.Sb(23,"e-columns"),l.Sb(24,"e-column",14),l.Ic(25,w,2,3,"ng-template",null,15,l.Jc),l.Ic(27,B,1,1,"ng-template",null,16,l.Jc),l.Rb(),l.Sb(29,"e-column",17),l.Ic(30,D,2,3,"ng-template",null,15,l.Jc),l.Rb(),l.Nb(32,"e-column",18),l.hc(33,"translate"),l.Rb(),l.Rb(),l.Rb(),l.Rb(),l.Rb(),l.Rb(),l.Rb(),l.Sb(34,"div",19),l.Sb(35,"button",20),l.cc("click",function(){return e.activeModal.close("Close click")}),l.Nb(36,"i",21),l.Kc(37),l.hc(38,"translate"),l.Rb(),l.Sb(39,"button",22),l.cc("click",function(){return e.printData()}),l.Nb(40,"i",23),l.Kc(41),l.hc(42,"translate"),l.Rb(),l.Rb(),l.Sb(43,"div",24),l.Ic(44,x,2,3,"div",25),l.Rb()),2&t&&(l.zb(2),l.Mc("",l.ic(3,15,"Subpackage")," "),l.zb(8),l.Mc("",l.ic(11,17,"Mother Can"),":"),l.zb(2),l.Bb(e.checkStatus()),l.nc("placeholder",l.ic(13,19,"Status")),l.mc("ngModel",e.statusText),l.zb(2),l.nc("placeholder",l.ic(15,21,"Scan QRCode")),l.mc("ngModel",e.qrCode),l.zb(2),l.nc("placeholder",l.ic(17,23,"Number of can")),l.mc("ngModel",e.can),l.zb(5),l.mc("dataSource",e.subpackages),l.zb(11),l.nc("headerText",l.ic(33,25,"Kilogram")),l.zb(5),l.Mc(" ",l.ic(38,27,"SAVE"),""),l.zb(4),l.Mc(" ",l.ic(42,29,"Print"),""),l.zb(3),l.mc("ngForOf",e.subpackages))},directives:[y.b,y.g,y.j,m,v.j,k.d,I.d,I.b,v.e,v.b,k.c,I.c,I.a,v.d,v.a,f.l,S.d],pipes:[U.c],styles:["input.warning-scan[_ngcontent-%COMP%]{color:#000!important;-webkit-animation:warning-frames .5s infinite;animation:warning-frames .5s infinite}input.success-scan[_ngcontent-%COMP%], input.warning-scan[_ngcontent-%COMP%]{width:100%;padding:12px 20px;box-sizing:border-box}input.success-scan[_ngcontent-%COMP%]{border:none;background-color:#3cbc8d;font-weight:700;border:none!important;color:#fff!important}@-webkit-keyframes warning-frames{0%{background-color:#fffb00}to{background-color:#ffea75}}@keyframes warning-frames{0%{background-color:#fffb00}to{background-color:#ffea75}}"]}),C)},dQqK:function(n,i,r){"use strict";r.d(i,"a",function(){return c});var s=r("iStF"),c=function(){function n(){a(this,n),this.editSettingsTree={allowEditing:!1,allowAdding:!1,allowDeleting:!1,newRowPosition:"Child",mode:"Row"},this.editSettings={showDeleteConfirmDialog:!1,allowEditing:!1,allowAdding:!1,allowDeleting:!1,mode:"Normal"},this.toolbarOptions=["ExcelExport","Add","Edit","Delete","Cancel","Search"],this.toolbarOptionsTree=["Add","Delete","Search","ExpandAll","CollapseAll","ExcelExport"],this.contextMenuItems=[{text:"Add Child",iconCss:" e-icons e-add",target:".e-content",id:"Add-Sub-Item"},{text:"Delete",iconCss:" e-icons e-delete",target:".e-content",id:"DeleteOC"}]}return o(n,[{key:"Permission",value:function(n){var i=n.snapshot.data.functionCode;this.functions=JSON.parse(localStorage.getItem("functions")).filter(function(t){return t.functionCode===i})||[];var a,r=e(this.functions);try{for(r.s();!(a=r.n()).done;){var o,s=a.value,c=[],u=e(s.childrens);try{for(u.s();!(o=u.n()).done;){var l=o.value,h=this.makeAction(l.code);c.push.apply(c,t(h.filter(Boolean)))}}catch(p){u.e(p)}finally{u.f()}c.push("Search");var d=c.filter(function(t,e,n){return e===n.indexOf(t)});this.toolbarOptions=d}}catch(p){r.e(p)}finally{r.f()}}},{key:"PermissionForTreeGrid",value:function(n){this.contextMenuItems=[],this.functions=JSON.parse(localStorage.getItem("functions"));var i,a=e(this.functions);try{for(a.s();!(i=a.n()).done;){var r=i.value;if(n.snapshot.data.functionCode.includes(r.functionCode)){var o,s=[],c=e(r.childrens);try{for(c.s();!(o=c.n()).done;){var u=o.value,l=this.makeActionTreeGrid(u.code);s.push.apply(s,t(l.filter(Boolean)))}}catch(d){c.e(d)}finally{c.f()}s.push("Search","ExpandAll","CollapseAll","ExcelExport");var h=s.filter(function(t,e,n){return e===n.indexOf(t)});this.toolbarOptionsTree=h;break}}}catch(d){a.e(d)}finally{a.f()}}},{key:"makeAction",value:function(t){switch(t){case s.a.CREATE:return this.editSettings.allowAdding=!0,["Add","Cancel"];case s.a.EDIT:return this.editSettings.allowEditing=!0,["Edit","Update","Cancel"];case s.a.DELETE:return this.editSettings.allowDeleting=!0,["Delete"];case s.a.EXCEL_EXPORT:return["ExcelExport"];default:return[void 0]}}},{key:"makeActionTreeGrid",value:function(t){switch(t){case s.a.EXCEL_EXPORT:return["ExcelExport"];case s.a.CREATE:return this.editSettingsTree.allowAdding=!0,this.contextMenuItems.push({text:"Add Child",iconCss:" e-icons e-add",target:".e-content",id:"Add-Sub-Item"}),["Add"];case s.a.EDIT:return this.editSettingsTree.allowEditing=!0,[void 0];case s.a.DELETE:return this.editSettingsTree.allowDeleting=!0,this.contextMenuItems.push({text:"Delete",iconCss:" e-icons e-delete",target:".e-content",id:"DeleteOC"}),[void 0];default:return[void 0]}}}]),n}()},"h9f+":function(t,e,n){"use strict";n.d(e,"a",function(){return h});var i=n("2Vo4"),r=n("lJxs"),s=n("tk/3"),c=n("AytR"),u=n("2zK7"),l=n("fXoL");new s.e({"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("token")});var h=function(){var t=function(){function t(e){a(this,t),this.http=e,this.baseUrl=c.a.apiUrlEC,this.authUrl=c.a.apiUrl,this.messageSource=new i.a(0),this.currentMessage=this.messageSource.asObservable()}return o(t,[{key:"changeMessage",value:function(t){this.messageSource.next(t)}},{key:"getBuildingsAsTreeView",value:function(){return this.http.get(this.baseUrl+"Building/GetAllAsTreeView")}},{key:"mappingUserWithBuilding",value:function(t){return this.http.post(this.baseUrl+"BuildingUser/MappingUserWithBuilding",t)}},{key:"removeBuildingUser",value:function(t){return this.http.post(this.baseUrl+"BuildingUser/RemoveBuildingUser",t)}},{key:"getAllUsers",value:function(t,e){var n=new u.a;return this.http.get("".concat(this.authUrl,"Users/GetAllUsers/").concat(c.a.systemCode,"/").concat(t,"/").concat(e),{observe:"response"}).pipe(Object(r.a)(function(t){return n.result=t.body,null!=t.headers.get("Pagination")&&(n.pagination=JSON.parse(t.headers.get("Pagination"))),n}))}},{key:"deleteUser",value:function(t){return this.http.delete("".concat(this.authUrl,"Users/Delete/").concat(t))}},{key:"updateUser",value:function(t){return this.http.post(this.authUrl+"Users/Update",t)}},{key:"createUser",value:function(t){return this.http.post(this.authUrl+"Users/Create",t)}},{key:"getAllBuildingUsers",value:function(){return this.http.get(this.baseUrl+"BuildingUser/getAllBuildingUsers")}},{key:"getBuildingUserByBuildingID",value:function(t){return this.http.get("".concat(this.baseUrl,"BuildingUser/GetBuildingUserByBuildingID/").concat(t))}}]),t}();return t.\u0275fac=function(e){return new(e||t)(l.Zb(s.b))},t.\u0275prov=l.Ib({token:t,factory:t.\u0275fac,providedIn:"root"}),t}()},"pwR+":function(t,e,n){"use strict";n.d(e,"a",function(){return u});var i=n("2Vo4"),r=n("tk/3"),s=n("AytR"),c=n("fXoL");new r.e({"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("token")});var u=function(){var t=function(){function t(e){a(this,t),this.http=e,this.baseUrl=s.a.apiUrlEC,this.data=new i.a(null)}return o(t,[{key:"setValue",value:function(t){this.data.next(t)}},{key:"getValue",value:function(){return this.data.asObservable()}},{key:"cancel",value:function(t){return this.http.post(this.baseUrl+"BottomFactory/Cancel",t)}},{key:"cancelRange",value:function(t){return this.http.post(this.baseUrl+"BottomFactory/cancelRange",t)}},{key:"EVAUVList",value:function(t){return this.http.get(this.baseUrl+"BottomFactory/EVAUVList/"+t,{})}},{key:"done",value:function(t){return this.http.get(this.baseUrl+"BottomFactory/Done/"+t,{})}},{key:"todo",value:function(t){return this.http.get(this.baseUrl+"BottomFactory/ToDo/"+t,{})}},{key:"todoAddition",value:function(t){return this.http.get(this.baseUrl+"BottomFactory/ToDoAddition/"+t,{})}},{key:"dispatchAddition",value:function(t){return this.http.get(this.baseUrl+"BottomFactory/dispatchAddition/"+t,{})}},{key:"dispatchList",value:function(t){return this.http.get(this.baseUrl+"BottomFactory/DispatchList/"+t,{})}},{key:"delay",value:function(t){return this.http.get(this.baseUrl+"BottomFactory/Delay/"+t,{})}},{key:"printGlue",value:function(t){return this.http.get(this.baseUrl+"BottomFactory/printGlue/"+t,{})}},{key:"findPrintGlue",value:function(t){return this.http.get(this.baseUrl+"BottomFactory/FindPrintGlue/"+t,{})}},{key:"dispatch",value:function(t){return this.http.post(this.baseUrl+"BottomFactory/Dispatch",t)}},{key:"updateStartStirTimeByMixingInfoID",value:function(t){return this.http.put(this.baseUrl+"BottomFactory/updateStartStirTimeByMixingInfoID/"+t,{})}},{key:"updateFinishStirTimeByMixingInfoID",value:function(t){return this.http.put(this.baseUrl+"BottomFactory/updateFinishStirTimeByMixingInfoID/"+t,{})}},{key:"generateToDoList",value:function(t){return this.http.post(this.baseUrl+"BottomFactory/GenerateToDoList",t)}},{key:"generateDispatchList",value:function(t){return this.http.post(this.baseUrl+"BottomFactory/GenerateDispatchList",t)}},{key:"exportExcel",value:function(t){return this.http.get("".concat(this.baseUrl,"BottomFactory/ExportExcel/").concat(t),{responseType:"blob"})}},{key:"exportExcel2",value:function(t){return this.http.get("".concat(this.baseUrl,"BottomFactory/GetNewReport/").concat(t),{responseType:"blob"})}},{key:"getMixingDetail",value:function(t){return this.http.post(this.baseUrl+"BottomFactory/GetMixingDetail",{glueName:t})}},{key:"finishDispatch",value:function(t){return this.http.put(this.baseUrl+"BottomFactory/FinishDispatch",t)}},{key:"getDispatchDetail",value:function(t,e,n,i){return this.http.get("".concat(this.baseUrl,"BottomFactory/GetDispatchDetail/").concat(t,"/").concat(e,"/").concat(n,"/").concat(i))}},{key:"getMixingInfoHistory",value:function(t,e,n,i){return this.http.get("".concat(this.baseUrl,"BottomFactory/GetMixingInfoHistory/").concat(t,"/").concat(e,"/").concat(n,"/").concat(i))}},{key:"updateDispatchDetail",value:function(t){return this.http.put(this.baseUrl+"BottomFactory/UpdateDispatchDetail",t)}},{key:"getDispatchListDetail",value:function(t,e,n){return this.http.get("".concat(this.baseUrl,"BottomFactory/GetDispatchListDetail/").concat(t,"/").concat(e,"/").concat(n))}},{key:"printGlueDispatchList",value:function(t,e,n,i){return this.http.get("".concat(this.baseUrl,"BottomFactory/printGlueDispatchList/").concat(t,"/").concat(e,"/").concat(n,"/").concat(i),{})}},{key:"updateMixingInfoDispatchList",value:function(t,e,n,i){return this.http.get("".concat(this.baseUrl,"BottomFactory/UpdateMixingInfoDispatchList/").concat(t,"/").concat(e,"/").concat(n,"/").concat(i),{})}},{key:"addOvertime",value:function(t){return this.http.post(this.baseUrl+"BottomFactory/AddOvertime",t)}},{key:"removeOvertime",value:function(t){return this.http.post(this.baseUrl+"BottomFactory/RemoveOvertime",t)}},{key:"dispatchListDelay",value:function(t){return this.http.get(this.baseUrl+"BottomFactory/DispatchListDelay/"+t,{})}},{key:"scanQRCode",value:function(t){return this.http.post(this.baseUrl+"BottomFactory/scanQRCode/",t)}},{key:"generateScanByNumber",value:function(t){return this.http.post(this.baseUrl+"BottomFactory/GenerateScanByNumber/",t)}},{key:"print",value:function(t){return this.http.post(this.baseUrl+"BottomFactory/Print",{subpackages:t})}},{key:"saveSubpackage",value:function(t){return this.http.post(this.baseUrl+"BottomFactory/SaveSubpackage",t)}},{key:"addDispatch",value:function(t){return this.http.post(this.baseUrl+"BottomFactory/addDispatch",t)}},{key:"updateDispatch",value:function(t){return this.http.put(this.baseUrl+"BottomFactory/UpdateDispatch",t)}},{key:"getAllDispatch",value:function(t){var e=(new r.f).set("buildingID",t.buildingID+"").set("mixingInfoID",t.mixingInfoID+"").set("glueNameID",t.glueNameID+"");return this.http.get(this.baseUrl+"BottomFactory/GetAllDispatch",{params:e})}},{key:"getMixingInfo",value:function(t){return this.http.get(this.baseUrl+"BottomFactory/GetMixingInfo/"+t,{})}},{key:"getSubpackageCapacity",value:function(){return this.http.get(this.baseUrl+"BottomFactory/GetSubpackageCapacity",{})}},{key:"getSubpackageLatestSequence",value:function(t,e,n){return this.http.get("".concat(this.baseUrl,"BottomFactory/GetSubpackageLatestSequence/").concat(t,"/").concat(e,"/").concat(n),{})}}]),t}();return t.\u0275fac=function(e){return new(e||t)(c.Zb(r.b))},t.\u0275prov=c.Ib({token:t,factory:t.\u0275fac,providedIn:"root"}),t}()},vrRs:function(t,e,n){"use strict";n.d(e,"a",function(){return h});var i=n("tk/3"),r=n("2Vo4"),s=n("lJxs"),c=n("AytR"),u=n("2zK7"),l=n("fXoL");new i.e({"Content-Type":"application/json"});var h=function(){var t=function(){function t(e){a(this,t),this.http=e,this.baseUrl=c.a.apiUrlEC,this.ingredientSource=new r.a(0),this.currentIngredient=this.ingredientSource.asObservable()}return o(t,[{key:"getIngredients",value:function(t,e){var n=new u.a,a=new i.f;return null!=t&&null!=e&&(a=(a=a.append("pageNumber",t)).append("pageSize",e)),this.http.get(this.baseUrl+"ingredient/getingredients",{observe:"response",params:a}).pipe(Object(s.a)(function(t){return n.result=t.body,null!=t.headers.get("Pagination")&&(n.pagination=JSON.parse(t.headers.get("Pagination"))),n}))}},{key:"search",value:function(t,e,n){var a=new u.a,r=new i.f;return null!=t&&null!=e&&(r=(r=r.append("pageNumber",t)).append("pageSize",e)),this.http.get(this.baseUrl+"ingredient/Search/"+n,{observe:"response",params:r}).pipe(Object(s.a)(function(t){return a.result=t.body,null!=t.headers.get("Pagination")&&(a.pagination=JSON.parse(t.headers.get("Pagination"))),a}))}},{key:"getAllIngredient",value:function(){return this.http.get(this.baseUrl+"ingredient/GetAll",{})}},{key:"rate",value:function(){return this.http.get(this.baseUrl+"ingredient/Rate",{})}},{key:"getAllGlueType",value:function(){return this.http.get(this.baseUrl+"ingredient/GetAllGlueType",{})}},{key:"getByID",value:function(t){return this.http.get(this.baseUrl+"ingredient/GetbyID/"+t,{})}},{key:"scanQRCode",value:function(t){return this.http.get(this.baseUrl+"ingredient/ScanQRCode/"+t,{})}},{key:"scanQRCodeFromChemicalWareHouse",value:function(t,e,n){return this.http.post("".concat(this.baseUrl,"ingredient/ScanQRCodeFromChemialWareHouse/").concat(t,"/").concat(e,"/").concat(n),{})}},{key:"scanQRCodeFromChemicalWareHouseV1",value:function(t){return this.http.post(this.baseUrl+"ingredient/ScanQRCodeFromChemialWareHouseV1/",t)}},{key:"scanQRCodeOutputV1",value:function(t){return this.http.post(this.baseUrl+"ingredient/ScanQRCodeOutputV1/",t)}},{key:"scanQRCodeOutput",value:function(t,e,n){return this.http.get("".concat(this.baseUrl,"ingredient/ScanQRCodeOutput/").concat(t,"/").concat(e,"/").concat(n),{})}},{key:"getAllSupplier",value:function(){return this.http.get(this.baseUrl+"Suppier/GetAll",{})}},{key:"getAllIngredientInfo",value:function(){return this.http.get(this.baseUrl+"ingredient/GetAllIngredientInfo",{})}},{key:"getAllIngredientInfoOutput",value:function(){return this.http.get(this.baseUrl+"ingredient/GetAllIngredientInfoOutPut",{})}},{key:"getAllIngredientInfoByBuildingName",value:function(t){return this.http.get(this.baseUrl+"ingredient/GetAllIngredientInfoByBuildingName/"+t,{})}},{key:"getAllIngredientInfoReport",value:function(){return this.http.get(this.baseUrl+"ingredient/GetAllIngredientInfoReport",{})}},{key:"getAllIngredientInfoReportByBuildingName",value:function(t){return this.http.get(this.baseUrl+"ingredient/GetAllIngredientInfoReportByBuildingName/"+t,{})}},{key:"searchInventory",value:function(t,e){return this.http.get("".concat(this.baseUrl,"ingredient/Search/").concat(t,"/").concat(e),{})}},{key:"searchInventoryByBuildingName",value:function(t,e,n){return this.http.get("".concat(this.baseUrl,"ingredient/SearchWithBuildingName/").concat(t,"/").concat(e,"/").concat(n),{})}},{key:"deleteIngredientInfo",value:function(t,e,n,i){return this.http.delete(this.baseUrl+"ingredient/DeleteIngredientInfo/".concat(t,"/").concat(e,"/").concat(n,"/").concat(i))}},{key:"UpdateConsumption",value:function(t,e,n){return this.http.post(this.baseUrl+"ingredient/UpdateConsumptionIngredientReport/".concat(t,"/").concat(e,"/").concat(n),{})}},{key:"UpdateConsumptionOfBuilding",value:function(t){return this.http.post(this.baseUrl+"ingredient/UpdateConsumptionOfBuildingIngredientReport",t)}},{key:"createSub",value:function(t){return this.http.post(this.baseUrl+"suppier/create",t)}},{key:"updateSub",value:function(t){return this.http.put(this.baseUrl+"suppier/update",t)}},{key:"deleteSub",value:function(t){return this.http.delete(this.baseUrl+"suppier/delete/"+t)}},{key:"sortBySup",value:function(t,e){return this.http.get(this.baseUrl+"GlueIngredient/GetIngredientsByGlueID/".concat(t,"/").concat(e))}},{key:"getIngredientsByGlueID",value:function(t){return this.http.get(this.baseUrl+"GlueIngredient/GetIngredientsByGlueID/"+t)}},{key:"create",value:function(t){return this.http.post(this.baseUrl+"ingredient/create1",t)}},{key:"update",value:function(t){return this.http.put(this.baseUrl+"ingredient/update",t)}},{key:"delete",value:function(t){return this.http.delete(this.baseUrl+"ingredient/delete/"+t)}},{key:"changeIngredient",value:function(t){this.ingredientSource.next(t)}},{key:"import",value:function(t,e){var n=new FormData;return n.append("UploadedFile",t),n.append("CreatedBy",e),this.http.post(this.baseUrl+"ingredient/Import",n)}},{key:"downloadFile",value:function(){return this.http.post(this.baseUrl+"ingredient/ExcelExport",{})}},{key:"GetQrcodeByid",value:function(t){return this.http.get(this.baseUrl+"ingredient/GetbyID/"+t)}},{key:"UpdatePrint",value:function(t){return this.http.put(this.baseUrl+"ingredient/UpdatePrint",t)}},{key:"checkIncoming",value:function(t,e,n){return this.http.get("".concat(this.baseUrl,"ingredient/CheckIncoming/").concat(t,"/").concat(e,"/").concat(n),{})}},{key:"getAllIngredientInfoByBuilding",value:function(t){return this.http.get(this.baseUrl+"ingredient/GetAllIngredientInfoByBuilding/"+t,{})}},{key:"getAllIngredientInfoOutputByBuilding",value:function(t){return this.http.get(this.baseUrl+"ingredient/GetAllIngredientInfoOutputByBuilding/"+t,{})}}]),t}();return t.\u0275fac=function(e){return new(e||t)(l.Zb(i.b))},t.\u0275prov=l.Ib({token:t,factory:t.\u0275fac,providedIn:"root"}),t}()},wsp1:function(t,e,n){"use strict";n.d(e,"a",function(){return u});var i=n("2Vo4"),r=n("tk/3"),s=n("AytR"),c=n("fXoL");new r.e({"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("token")});var u=function(){var t=function(){function t(e){a(this,t),this.http=e,this.baseUrl=s.a.apiUrlEC,this.messageSource=new i.a(0),this.currentMessage=this.messageSource.asObservable()}return o(t,[{key:"changeMessage",value:function(t){this.messageSource.next(t)}},{key:"delete",value:function(t){return this.http.delete("".concat(this.baseUrl,"Building/Delete/").concat(t))}},{key:"rename",value:function(t){return this.http.put(this.baseUrl+"Building/Update",t)}},{key:"getBuildingsAsTreeView",value:function(){return this.http.get(this.baseUrl+"Building/GetAllAsTreeView")}},{key:"getBuildings",value:function(){return this.http.get(this.baseUrl+"Building/GetBuildings")}},{key:"getAllBuildingType",value:function(){return this.http.get(this.baseUrl+"Building/getAllBuildingType")}},{key:"getBuildingsForSetting",value:function(){return this.http.get(this.baseUrl+"Building/GetBuildingsForSetting")}},{key:"addOrUpdateLunchTime",value:function(t){return this.http.post(this.baseUrl+"Building/AddOrUpdateLunchTime",t)}},{key:"createMainBuilding",value:function(t){return this.http.post(this.baseUrl+"Building/CreateMainBuilding",t)}},{key:"createSubBuilding",value:function(t){return this.http.post(this.baseUrl+"Building/CreateSubBuilding",t)}}]),t}();return t.\u0275fac=function(e){return new(e||t)(c.Zb(r.b))},t.\u0275prov=c.Ib({token:t,factory:t.\u0275fac,providedIn:"root"}),t}()}}])}();